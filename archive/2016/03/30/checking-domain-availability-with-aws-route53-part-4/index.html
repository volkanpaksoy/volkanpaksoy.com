<!DOCTYPE HTML>

<html>

<head>
	<meta charset="utf-8">
	<title>Checking domain availability with AWS Route 53 Part 4&#58; AngularJS Client - Playground for the mind</title>
	<meta name="author" content="Volkan Paksoy">

	
	<meta name="description" content="
		
	">
	

	<!-- http://t.co/dKP3o1e -->
	<meta name="HandheldFriendly" content="True">
	<meta name="MobileOptimized" content="320">
	<meta name="viewport" content="width=device-width, initial-scale=1">

	<link href="https://feeds.feedburner.com/PlaygroundForTheMind" rel="alternate" title="Playground for the mind" type="application/atom+xml">
	
	<link rel="canonical" href="https://volkanpaksoy.com/archive/2016/03/30/checking-domain-availability-with-aws-route53-part-4/">
	<!--[if lt IE 9]><script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script><![endif]-->
	<!--Fonts from Google"s Web font directory at http://google.com/webfonts -->
	<link href='https://fonts.googleapis.com/css?family=Open+Sans:300,400,400italic,600,700,800' rel='stylesheet' type='text/css'>
	<link href="/favicon.png" rel="shortcut icon">
	<link href="/css/screen.css" media="screen, projection" rel="stylesheet" type="text/css">
	<link rel="stylesheet" href="/css/code.css" type="text/css">
	<script src="//ajax.googleapis.com/ajax/libs/jquery/1.7.2/jquery.min.js"></script>
	<script src="/js/slash.js" async></script>
	<script src="/js/GithubRepoWidget.min.js" async></script>

  <script data-ad-client="ca-pub-0414743900624675" async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>

  
	<script type="text/javascript">
		var _gaq = _gaq || [];
		_gaq.push(['_setAccount', 'UA-35583486-1']);
		_gaq.push(['_trackPageview']);

		(function() {
			var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
			ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
			var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
		})();
	</script>


</head>


<body>
	<div class="container">
		<div class="left-col">
			<div class="intrude-less">
				<header id="header" class="inner"><div class="profilepic">
	
	<a href="/">
		<img src="https://s.gravatar.com/avatar/760bf518408c38ebb0f0e5adb8089e30?s=80?s=160" alt="Profile Picture" style="width: 160px;">
	</a>	
	
</div>
<hgroup>
  <h1 class="site-title" style="font-size: 2.4em;">
		<a style="color: rgba(255, 165, 0, 0.8);" href="/">Playground for the mind</a>
	</h1>
  
    <h2>It's all about the journey, not the destination</h2>
  
</hgroup>

<nav id="sub-nav">
	<div class="social">
		
			<a class="rss" href="https://feeds.feedburner.com/PlaygroundForTheMind" title="RSS" target="_blank" rel="noopener noreferrer">RSS</a>
		
		
			<a class="github" href="https://github.com/volkanpaksoy" title="GitHub" target="_blank" rel="noopener noreferrer">GitHub</a>
		
		
			<a class="stackoverflow" href="https://stackoverflow.com/users/3093396/volkan-paksoy" title="StackOverflow" target="_blank" rel="noopener noreferrer">StackOverflow</a>
		
	</div>
</nav>

<nav id="main-nav">
<ul class="main-navigation">
  <li><a href="/archive">posts</a></li>
  <li><a href="/category">categories</a></li>
</ul>
<br>
<br>
<script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-0414743900624675" crossorigin="anonymous"></script>
<!-- AdUnit01 -->
<ins class="adsbygoogle" style="display:block" data-ad-client="ca-pub-0414743900624675" data-ad-slot="9604018233" data-ad-format="auto" data-full-width-responsive="true"></ins>
<script>
     (adsbygoogle = window.adsbygoogle || []).push({});
</script>
</nav></header>				
			</div>
		</div>
		<div class="mid-col">
			<div class="mid-col-container">
				<div id="content" class="inner">
<article class="post" itemscope itemtype="http://schema.org/BlogPosting">
	<h1 class="title" itemprop="name">Checking domain availability with AWS Route 53 Part 4: AngularJS Client</h1>
	<div class="meta">
	<span class="date">




<time datetime="2016-03-30T11:00:00+01:00" itemprop="datePublished">March 30, 2016</time></span>
	<span class="categories"><!-- <span class="category-link"><a href="/category/"></a></span> -->

<!-- dev, aws -->




    <a href="/category/dev">dev</a>
    , 

    <a href="/category/aws">aws</a>
    
</span>
	<span class="tags">route53, angularjs</span>
	
</div>
	<div class="entry-content" itemprop="articleBody">
<p>Previously in this series:</p>

<ul>
  <li><a href="https://volkanpaksoy.com/archive/2015/08/04/checking-domain-availability-with-aws-route53-part-1">Part 1: Getting TLD List</a></li>
  <li><a href="https://volkanpaksoy.com/archive/2015/08/06/checking-domain-availability-with-aws-route53-part-2">Part 2: Implementing API for TLD service</a></li>
  <li><a href="https://volkanpaksoy.com/archive/2015/08/08/checking-domain-availability-with-aws-route53-part-3">Part 3: Consuming the APIs with Console Client</a></li>
</ul>

<p>So far I was using the console client but I thought I chould use a prettier web-based-UI and came up with this:</p>

<p><a href="https://domchk53.com" target="_blank" rel="noopener noreferrer"><img src="/images/vpblogimg/2016/03/domchk53-mainview.png" alt="DomChk53 AngularJS Client"></a></p>

<p>It’s using AngularJS and Bootstrap which significantly improved the development process.</p>

<p>API in the backend is AWS API Gateway on a custom domain (api.domchk53.com) and using Lambda functions to do the actual work. One great thing about API Gatewayis that it’s very easy to set requests rates:</p>

<p><img src="/images/vpblogimg/2016/03/domchk53-APIGatewayLimits.png" alt=""></p>

<p>Currently I set it to max 5 requests per second. I chose this value because of the limitation on AWS API as stated <a href="http://docs.aws.amazon.com/Route53/latest/DeveloperGuide/DNSLimitations.html" target="_blank" rel="noopener noreferrer">here</a>:</p>

<blockquote>
  <p>All requests – Five requests per second per AWS account. If you submit more than five requests per second, Amazon Route 53 returns an HTTP 400 error (Bad request). The response header also includes a Code element with a value of Throttling and a Message element with a value of Rate exceeded.</p>
</blockquote>

<p>Of course limiting this on the client side assumes a single client so you may still get “Rate exceeded” errors even if running single query at a time. I’m planning to implement a Node server using SQS to move the queue to server side but that’s not one of my priorities right now.</p>

<p>The Lambda function is straightforward enough. Just calls the checkDomainAvailability API method with the supplied parameters:</p>

<div class="language-javascript highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nx">exports</span><span class="p">.</span><span class="nx">handler</span> <span class="o">=</span> <span class="kd">function</span><span class="p">(</span><span class="nx">event</span><span class="p">,</span> <span class="nx">context</span><span class="p">)</span> <span class="p">{</span>
    <span class="kd">var</span> <span class="nx">AWS</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="s1">'aws-sdk'</span><span class="p">);</span>
	<span class="kd">var</span> <span class="nx">options</span> <span class="o">=</span> <span class="p">{</span>
	    <span class="na">region</span><span class="p">:</span> <span class="s2">"us-east-1"</span>
	<span class="p">}</span>
	
	<span class="kd">var</span> <span class="nx">route53domains</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">AWS</span><span class="p">.</span><span class="nx">Route53Domains</span><span class="p">(</span><span class="nx">options</span><span class="p">);</span>
    
    <span class="kd">var</span> <span class="nx">params</span> <span class="o">=</span> <span class="p">{</span>
        <span class="na">DomainName</span><span class="p">:</span> <span class="nx">event</span><span class="p">.</span><span class="nx">domain</span> <span class="o">+</span> <span class="s1">'.'</span> <span class="o">+</span> <span class="nx">event</span><span class="p">.</span><span class="nx">tld</span>
    <span class="p">};</span>

    <span class="nx">route53domains</span><span class="p">.</span><span class="nx">checkDomainAvailability</span><span class="p">(</span><span class="nx">params</span><span class="p">,</span> <span class="kd">function</span> <span class="p">(</span><span class="nx">err</span><span class="p">,</span> <span class="nx">data</span><span class="p">)</span> <span class="p">{</span>

        <span class="k">if</span> <span class="p">(</span><span class="nx">err</span><span class="p">)</span> <span class="p">{</span>
            <span class="nx">context</span><span class="p">.</span><span class="nx">fail</span><span class="p">(</span><span class="nx">err</span><span class="p">);</span>
        <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
            <span class="kd">var</span> <span class="nx">result</span> <span class="o">=</span> <span class="p">{</span>
                <span class="na">Domain</span><span class="p">:</span> <span class="nx">event</span><span class="p">.</span><span class="nx">domain</span><span class="p">,</span>
                <span class="na">Tld</span><span class="p">:</span> <span class="nx">event</span><span class="p">.</span><span class="nx">tld</span><span class="p">,</span>
                <span class="na">CheckDate</span><span class="p">:</span> <span class="k">new</span> <span class="nb">Date</span><span class="p">().</span><span class="nx">toISOString</span><span class="p">(),</span>
                <span class="na">RequestResult</span><span class="p">:</span> <span class="s2">"OK"</span><span class="p">,</span>
                <span class="na">Availability</span><span class="p">:</span> <span class="nx">data</span><span class="p">.</span><span class="nx">Availability</span>
            <span class="p">};</span>
            
            <span class="nx">context</span><span class="p">.</span><span class="nx">succeed</span><span class="p">(</span><span class="nx">result</span><span class="p">);</span>  
        <span class="p">}</span>
    <span class="p">});</span>
<span class="p">}</span>
</code></pre></div></div>

<h2 id="usage">Usage</h2>
<p>I wanted this tool as an improvement to AWS already provides. What you can do with Management Console is search a single domain and it searches it against the popular 13 TLDs. If you need anything outside these 13 you have to pick them manually.</p>

<p>In DomChk53 you can search multiple domain names at once against all supported TLDs (293 as of this writing).</p>

<p><img src="/images/vpblogimg/2016/03/domchk53-multipledomainsandTLDs.png" alt=""></p>

<p>Also you can group TLDs into lists so you can for example search the most common ones (com, net, co.uk etc.) and say finance related ones (money, cash, finance etc.). Depending on the domain name one group may be more relevant.</p>

<p><img src="/images/vpblogimg/2016/03/domchk53-NewList.PNG" alt=""></p>

<p>You can cancel a query at any time to avoid wasting precious requests if you change your mind about the domain.</p>

<p><img src="/images/vpblogimg/2016/03/domchk53-CancelWaitingRequests.png" alt=""></p>

<h2 id="whats-missing">What’s missing</h2>
<p>For a while I’m planning to leave it as is but when I have it in me to revisit the project I will implement:</p>

<ul>
  <li>Server-side queueing of requests</li>
  <li>The option to export/email the results in PDF format</li>
</ul>

<p>I’m also open to other suggestions…</p>

<h2 id="resources">Resources</h2>
<ul>
  <li><a href="https://github.com/volkanpaksoy/domchk53" target="_blank" rel="noopener noreferrer">DomChk53 Source Code</a></li>
  <li><a href="https://domchk53.com" target="_blank" rel="noopener noreferrer">DomChk53 Live Site</a></li>
  <li><a href="http://docs.aws.amazon.com/apigateway/latest/developerguide/how-to-custom-domains.html" target="_blank" rel="noopener noreferrer">Use a Custom Domain Name in API Gateway</a></li>
  <li><a href="http://docs.aws.amazon.com/apigateway/latest/developerguide/how-to-cors.html" target="_blank" rel="noopener noreferrer">Enable CORS for a Method in API Gateway</a></li>
  <li><a href="http://docs.aws.amazon.com/Route53/latest/DeveloperGuide/DNSLimitations.html" target="_blank" rel="noopener noreferrer">AWS Documentation on account limits</a></li>
</ul>
</div>

</article>

<div id="page-navigation"> 
        <div class="previous"> 
         
                <a href="/archive/2016/03/18/dynamic-dns-with-aws-route-53-part-2-angular-client/" title="Previous Post: 
Dynamic DNS with AWS Route 53 - Part 2: AngularJS Client">« Dynamic DNS with AWS Route 53 - Part 2: AngularJS Client</a>
         
        </div>

        <div class="next"> 
         
               <a href="/archive/2016/04/12/swift-notes-the-basics/" title="next Post: 
Swift Notes - The Basics">Swift Notes - The Basics » </a> 
         
        </div>
</div> 


</div>
			</div>
			<footer id="footer" class="inner"><p>
  Copyright © 2021 - Volkan Paksoy Blog content licensed under the Creative Commons <a href="http://creativecommons.org/licenses/by/2.5/" target="_blank" rel="noopener noreferrer">CC BY 2.5</a> | Site design based on the <a href="https://github.com/shashankmehta/greyshade" target="_blank" rel="noopener noreferrer">Greyshade theme</a> under the <a href="http://sm.mit-license.org/" target="_blank" rel="noopener noreferrer">MIT license</a>
</p>
</footer>
		</div>
	</div>
</body>
</html>
