<!DOCTYPE HTML>

<html>

<head>
	<meta charset="utf-8">
	<title>On cloud nine! - Playground for the mind</title>
	<meta name="author" content="Volkan Paksoy">

	
	<meta name="description" content="
		
	">
	

	<!-- http://t.co/dKP3o1e -->
	<meta name="HandheldFriendly" content="True">
	<meta name="MobileOptimized" content="320">
	<meta name="viewport" content="width=device-width, initial-scale=1">

	<link href="https://feeds.feedburner.com/PlaygroundForTheMind" rel="alternate" title="Playground for the mind" type="application/atom+xml">
	
	<link rel="canonical" href="https://volkanpaksoy.com/archive/2012/10/06/on-cloud-nine/">
	<!--[if lt IE 9]><script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script><![endif]-->
	<!--Fonts from Google"s Web font directory at http://google.com/webfonts -->
	<link href='https://fonts.googleapis.com/css?family=Open+Sans:300,400,400italic,600,700,800' rel='stylesheet' type='text/css'>
	<link href="/favicon.png" rel="shortcut icon">
	<link href="/css/screen.css" media="screen, projection" rel="stylesheet" type="text/css">
	<link rel="stylesheet" href="/css/code.css" type="text/css">
	<script src="//ajax.googleapis.com/ajax/libs/jquery/1.7.2/jquery.min.js"></script>
	<script src="/js/slash.js" async></script>
	<script src="/js/GithubRepoWidget.min.js" async></script>

  	
	<script type="text/javascript">
		var _gaq = _gaq || [];
		_gaq.push(['_setAccount', 'UA-35583486-1']);
		_gaq.push(['_trackPageview']);

		(function() {
			var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
			ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
			var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
		})();
	</script>


</head>


<body>
	<div class="container">
		<div class="left-col">
			<div class="intrude-less">
				<header id="header" class="inner"><div class="profilepic">
	
	<a href="/">
		<img src="https://s.gravatar.com/avatar/760bf518408c38ebb0f0e5adb8089e30?s=80?s=160" alt="Profile Picture" style="width: 160px;">
	</a>	
	
</div>
<hgroup>
  <h1 class="site-title" style="font-size: 2.4em;">
		<a style="color: rgba(255, 165, 0, 0.8);" href="/">Playground for the mind</a>
	</h1>
  
    <h2>It's all about the journey, not the destination</h2>
  
</hgroup>

<nav id="sub-nav">
	<div class="social">
		
			<a class="rss" href="https://feeds.feedburner.com/PlaygroundForTheMind" title="RSS" target="_blank" rel="noopener noreferrer">RSS</a>
		
		
			<a class="github" href="https://github.com/volkanpaksoy" title="GitHub" target="_blank" rel="noopener noreferrer">GitHub</a>
		
		
			<a class="stackoverflow" href="https://stackoverflow.com/users/3093396/volkan-paksoy" title="StackOverflow" target="_blank" rel="noopener noreferrer">StackOverflow</a>
		
	</div>
</nav>

<nav id="main-nav">
<ul class="main-navigation">
  <li><a href="/archive">posts</a></li>
  <li><a href="/category">categories</a></li>
</ul>
</nav></header>				
			</div>
		</div>
		<div class="mid-col">
			<div class="mid-col-container">
				<div id="content" class="inner">
<article class="post" itemscope itemtype="http://schema.org/BlogPosting">
	<h1 class="title" itemprop="name">On cloud nine!</h1>
	<div class="meta">
	<span class="date">




<time datetime="2012-10-06T19:00:17+01:00" itemprop="datePublished">October  6, 2012</time></span>
	<span class="categories"><!-- <span class="category-link"><a href="/category/"></a></span> -->

<!-- misc -->




    <a href="/category/misc">misc</a>
    
</span>
	<span class="tags">site_news</span>
	
</div>
	<div class="entry-content" itemprop="articleBody">
<p>I’ve been postponing this for a long time but finally I did it: I started using AWS (Amazon Web Services). My blog doesn’t get too much traffic so actually I don’t need the scalability which is EC2’s strongest point but I wanted to play with the cloud so decided to move my blog first. It’s quite easy to do so and I’ll explain how to migrate your existing blog to cloud within minutes:</p>

<h4 id="step-01-backup-your-existing-blog">STEP 01: Backup your existing blog</h4>
<blockquote>
  <p>mysqldump -u root –p {database name} &gt; blog_backup.sql</p>
</blockquote>

<p>Download your wordpress installation folder and the backup you just created from your existing server. I Used WinSCP to get my files. It can be downloaded <a href="http://winscp.net/eng/download.php" target="_blank" rel="noopener noreferrer">here</a>.</p>

<h4 id="step-02-create-aws-ec2-instance">STEP 02: Create AWS EC2 instance</h4>
<p>Fun part starts now. Login to your AWS account and go to EC2 console. Click Launch Instance and follow the wizard. For my blog, I selected a Micro instance but it depends on your needs. I selected a 64-bit Amazon Linux AMI for the instance.</p>

<h4 id="step-03-assign-an-ip-to-your-serverspan">STEP 03: Assign an IP to your server*&lt;/span&gt;</h4>
<p>Our machine has just started running but to update our domain’s DNS records we need an IP. On the left menu, click the Elastic IPs link and allocate a new IP address. The IPs assigned to EC2 instances are free.</p>

<p><img src="/images/vpblogimg/2012/10/blog_aws_01.png" alt="AWS"></p>

<p>Right click on the IP and select Associate and choose your instance. After this step we have a running machine with a public IP.</p>

<h4 id="step-04-ssh-into-the-machine">STEP 04: SSH into the machine</h4>
<p>By default SSH is enabled you must have created a keypair to access your machine during the Step 2. I use putty to as my SSH client which can be downloaded from <a href="http://www.chiark.greenend.org.uk/~sgtatham/putty/download.html" target="_blank" rel="noopener noreferrer">here</a>. It’s best to switch to root during the installations. So type:</p>
<blockquote>
  <p>sudo su</p>
</blockquote>

<h4 id="step-05-install-required-programs">STEP 05: Install required programs</h4>
<p>First install Apache:</p>
<blockquote>
  <p>yum install httpd</p>
</blockquote>

<p>Then PHP:</p>
<blockquote>
  <p>yum install php php-mysql</p>
</blockquote>

<p>Then MySQL:</p>
<blockquote>
  <p>yum install mysql-server</p>
</blockquote>

<p>If you use SSL like me you also need to install SSL module for Apache:</p>
<blockquote>
  <p>yum install mod_ssl</p>
</blockquote>

<p>Start Apache and MySQL</p>
<blockquote>
  <p>service httpd start</p>
</blockquote>

<blockquote>
  <p>service mysqld start</p>
</blockquote>

<h4 id="step-06-customize-mysql-and-import-your-blog">STEP 06: Customize MySQL and import your blog</h4>
<ol>
  <li>Run the following command to set root password and harden the default installation
    <blockquote>
      <p>mysql_secure_installation</p>
    </blockquote>
  </li>
  <li>Login to MySQL
    <blockquote>
      <p>mysql -u root –p</p>
    </blockquote>
  </li>
  <li>
    <p>Create your database, user and grant access to that user</p>

    <blockquote>
      <p>create database {database name};</p>
    </blockquote>

    <blockquote>
      <p>create user ‘{user name}’@’localhost’ identified by ‘{password}’;</p>
    </blockquote>

    <blockquote>
      <p>grant all privileges on {database name}.* to ‘{user name}’@’localhost’ with grant option;</p>
    </blockquote>
  </li>
  <li>Switch to database and import data
    <blockquote>
      <p>use {database name}’;</p>
    </blockquote>

    <blockquote>
      <p>source {path/to/mysqldump file you uploaded}</p>
    </blockquote>
  </li>
</ol>

<h4 id="step-07-copy-blog-files">STEP 07: Copy blog files</h4>
<p>Copy the Wordpress files you uploaded under /var/www/html/{directory name}</p>

<h4 id="step-08-configure-apache">STEP 08: Configure Apache</h4>
<p>Enter the command to edit configration file:</p>
<blockquote>
  <p>vi /etc/httpd/conf/httpd.conf</p>
</blockquote>

<p>Go down to the end of the file and create a new virtual host by this:</p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>NameVirtualHost *:80
&lt;VirtualHost *:80&gt;
	ServerAdmin webmaster@localhost
	DocumentRoot /var/www/html/{directory name}
	ServerName {Your domain name}
	ServerAlias www.{Your domain name}
&lt;/VirtualHost&gt;
</code></pre></div></div>

<p>And restart the Apache service:</p>
<blockquote>
  <p>service httpd restart</p>
</blockquote>

<h4 id="step-09-enable-access-to-ftp-http-and-https">STEP 09: Enable access to FTP, HTTP and HTTPS</h4>
<p>One last step before testing your blog is opening port 21 (for installing themes, plugins etc.) 80 (for viewing!), and 443 (if you’re going to use SSL) on the AWS EC2 console. For this, click on the Security Groups on the left menu. Add the ports and press Add Rule and then Apply Rule Changes.</p>

<h4 id="step-10-install-ftp-server">STEP 10: Install FTP server</h4>
<ol>
  <li>Enter the following command and install the FTP server:
    <blockquote>
      <p>yum install vsftpd</p>
    </blockquote>
  </li>
  <li>Create a certificate to be used with FTPS connections:
    <blockquote>
      <p>openssl req -x509 -nodes -days 365 -newkey rsa:1024 -keyout /etc/vsftpd/vsftpd.pem -out /etc/vsftpd/vsftpd.pem</p>
    </blockquote>
  </li>
  <li>Edit the configuration file:
    <blockquote>
      <p>vi /etc/vsftpd/vsftpd.conf</p>
    </blockquote>

    <p>Disable anonymous access and add these lines to the end of the file. Then save the file and exit:</p>

    <div class="highlighter-rouge">
<div class="highlight"><pre class="highlight"><code> ssl_enable=YES
 allow_anon_ssl=NO
 force_local_data_ssl=NO
 force_local_logins_ssl=NO
 ssl_tlsv1=YES
 ssl_sslv2=NO
 ssl_sslv3=NO
 rsa_cert_file=/etc/vsftpd/vsftpd.pem
</code></pre></div>    </div>
  </li>
  <li>Start the service
    <blockquote>
      <p>service vsftpd start</p>
    </blockquote>
  </li>
  <li>
    <p>Create a user for FTP access and set the password</p>

    <p>useradd {user name}
 passwd {user name}</p>
  </li>
</ol>

<h4 id="step-11-optional">STEP 11 (Optional):</h4>
<p>If you don’t want to enter the FTP credentials every time, you can<br>
set them in the wp-config.php file:</p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code> define('FTP_BASE', '/var/www/html/{folder name}/');
 define('FTP_CONTENT_DIR', '/var/www/html/{folder name}/wp-content/');
 define('FTP_PLUGIN_DIR ', '/var/www/html/{folder name}/wp-content/plugins/');
 define('FTP_USER', '{user name}');
 define('FTP_PASS', '{password});
 define('FTP_HOST', {hostname]');
 define('FTP_SSL', true);
</code></pre></div></div>

<h4 id="step-12-optional-install-ssl-certificate-for-the-blog">STEP 12 (Optional): Install SSL certificate for the blog</h4>
<p>This step is optional, but using SSL is strongly recommended when connecting to your blog as administrator</p>

<p>Upload your private key and certificate files to your server and 
copy them under SSL folder:</p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>mkdir /etc/ssl/private&lt;br /&gt;
mv filename.key /etc/ssl/private/&lt;br /&gt;
mv filename.crt /etc/ssl/certs/&lt;br /&gt;
mv CARootCert.crt /etc/ssl/certs/&lt;br /&gt;
</code></pre></div></div>

<p>Modify Apache configuration file for SSL:</p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>NameVirtualHost *:443
&lt;VirtualHost *:443&gt;
 DocumentRoot /var/www/html/{folder name}
 ServerName {domain name}
 ServerAlias www.{domain name}
 SSLEngine on
 SSLProtocol all –SSLv2
 SSLCipherSuite ALL:!ADH:!EXPORT:!SSLv2:RC4+RSA:+HIGH:+MEDIUM:+LOW
 SSLCertificateFile /etc/ssl/certs/filename.crt
 SSLCertificateKeyFile /etc/ssl/private/filename.key
 SSLCACertificateFile /etc/ssl/certs/CARootCert.crt
&lt;/VirtualHost&gt;
</code></pre></div></div>

<h4 id="step-13-optional">STEP 13 (Optional):</h4>
<p>If you get an “Unable to locate Themes directory” error add the following snippet to wp-config.php.</p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>if(is_admin()) {
 add_filter('filesystem_method', create_function('$a', 'return &amp;quot;direct&amp;quot;;' ));
 define( 'FS_CHMOD_DIR', 0751 );
 }
</code></pre></div></div>

<h4 id="step-14-enjoy">STEP 14: Enjoy!</h4>
<p>That’s it! You installed a Wordpress application, imported your old posts, secured your blog with FTPS and HTTPS access. Time to celebrate!</p>
</div>

</article>

<div id="page-navigation"> 
        <div class="previous"> 
         
                <a href="/archive/2012/08/24/online-education-boom/" title="Previous Post: 
Online Education Boom">« Online Education Boom</a>
         
        </div>

        <div class="next"> 
         
               <a href="/archive/2012/10/11/online-networking-course-from-stanford/" title="next Post: 
Online networking course from Stanford">Online networking course from Stanford » </a> 
         
        </div>
</div> 


</div>
			</div>
			<footer id="footer" class="inner"><p>
  Copyright © 2020 - Volkan Paksoy Blog content licensed under the Creative Commons <a href="http://creativecommons.org/licenses/by/2.5/" target="_blank" rel="noopener noreferrer">CC BY 2.5</a> | Site design based on the <a href="https://github.com/shashankmehta/greyshade" target="_blank" rel="noopener noreferrer">Greyshade theme</a> under the <a href="http://sm.mit-license.org/" target="_blank" rel="noopener noreferrer">MIT license</a>
</p>
</footer>
		</div>
	</div>
</body>
</html>
