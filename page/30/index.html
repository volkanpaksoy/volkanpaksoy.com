<!DOCTYPE HTML>

<html>

<head>
	<meta charset="utf-8">
	<title>Playground for the mind</title>
	<meta name="author" content="Volkan Paksoy">

	
	<meta name="description" content="
		
	">
	

	<!-- http://t.co/dKP3o1e -->
	<meta name="HandheldFriendly" content="True">
	<meta name="MobileOptimized" content="320">
	<meta name="viewport" content="width=device-width, initial-scale=1">

	<link href="https://feeds.feedburner.com/PlaygroundForTheMind" rel="alternate" title="Playground for the mind" type="application/atom+xml">
	
	<link rel="canonical" href="https://volkanpaksoy.com/page/30/">
	<!--[if lt IE 9]><script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script><![endif]-->
	<!--Fonts from Google"s Web font directory at http://google.com/webfonts -->
	<link href='https://fonts.googleapis.com/css?family=Open+Sans:300,400,400italic,600,700,800' rel='stylesheet' type='text/css'>
	<link href="/favicon.png" rel="shortcut icon">
	<link href="/css/screen.css" media="screen, projection" rel="stylesheet" type="text/css">
	<link rel="stylesheet" href="/css/code.css" type="text/css">
	<script src="//ajax.googleapis.com/ajax/libs/jquery/1.7.2/jquery.min.js"></script>
	<script src="/js/slash.js" async></script>
	<script src="/js/GithubRepoWidget.min.js" async></script>

  <script data-ad-client="ca-pub-0414743900624675" async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>

  
	<script type="text/javascript">
		var _gaq = _gaq || [];
		_gaq.push(['_setAccount', 'UA-35583486-1']);
		_gaq.push(['_trackPageview']);

		(function() {
			var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
			ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
			var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
		})();
	</script>


</head>


<body>
	<div class="container">
		<div class="left-col">
			<div class="intrude-less">
				<header id="header" class="inner"><div class="profilepic">
	
	<a href="/">
		<img src="https://s.gravatar.com/avatar/760bf518408c38ebb0f0e5adb8089e30?s=80?s=160" alt="Profile Picture" style="width: 160px;">
	</a>	
	
</div>
<hgroup>
  <h1 class="site-title" style="font-size: 2.4em;">
		<a style="color: rgba(255, 165, 0, 0.8);" href="/">Playground for the mind</a>
	</h1>
  
    <h2>It's all about the journey, not the destination</h2>
  
</hgroup>

<nav id="sub-nav">
	<div class="social">
		
			<a class="rss" href="https://feeds.feedburner.com/PlaygroundForTheMind" title="RSS" target="_blank" rel="noopener noreferrer">RSS</a>
		
		
			<a class="github" href="https://github.com/volkanpaksoy" title="GitHub" target="_blank" rel="noopener noreferrer">GitHub</a>
		
		
			<a class="stackoverflow" href="https://stackoverflow.com/users/3093396/volkan-paksoy" title="StackOverflow" target="_blank" rel="noopener noreferrer">StackOverflow</a>
		
	</div>
</nav>

<nav id="main-nav">
<ul class="main-navigation">
  <li><a href="/archive">posts</a></li>
  <li><a href="/category">categories</a></li>
</ul>
<br>
<br>
<script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-0414743900624675" crossorigin="anonymous"></script>
<!-- AdUnit01 -->
<ins class="adsbygoogle" style="display:block" data-ad-client="ca-pub-0414743900624675" data-ad-slot="9604018233" data-ad-format="auto" data-full-width-responsive="true"></ins>
<script>
     (adsbygoogle = window.adsbygoogle || []).push({});
</script>
</nav></header>				
			</div>
		</div>
		<div class="mid-col">
			<div class="mid-col-container">
				<div id="content" class="inner">
<div itemscope itemtype="http://schema.org/Blog">



    <article class="post" itemprop="blogPost" itemscope itemtype="http://schema.org/BlogPosting">
        
	<h1 class="title" itemprop="name"><a href="/archive/2015/02/05/adventures-in-fsharp/" itemprop="url">Adventures in F# - Miscellaneous Notes</a></h1>
	<div class="meta">
	<span class="date">




<time datetime="2015-02-05T18:00:00+00:00" itemprop="datePublished">February  5, 2015</time></span>
	<span class="categories"><!-- <span class="category-link"><a href="/category/dev">dev</a></span> -->

<!-- dev -->




    <a href="/category/dev">dev</a>
    
</span>
	<span class="tags">fsharp</span>
	
</div>
	<div class="entry-content" itemprop="articleBody">
		<p>I finished the Pluralsight course finally. I’m still studying F# 2 pomodoros a day but lately lost he motivation to publish the notes. In this post I’ll tidy up the notes. In order to maintain my cadence I think I had better develop more stuff instead of covering theoretical subjects.</p>

<h3 id="more-notes">More Notes</h3>

<ul>
  <li>Upcasting / Downcasting
To upcast <strong>:&gt;</strong> operator is used. Alternatively the keyword <strong>upcast</strong> can be used to achieve the same results. It performs a static cast and the cast is determined at runtime.</li>
</ul>

<p>Downcasting is performed by the <strong>:?&gt;</strong> operator or <strong>downcast</strong> keyword.</p>

<ul>
  <li>Abstract classes
Abstract classes are decorated with **[<abstractclass>]**. To mark members **abstract** keyword is used:</abstractclass>
</li>
</ul>

<div class="language-fsharp highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">abstract</span> <span class="nc">Area</span> <span class="p">:</span> <span class="kt">float</span> <span class="k">with</span> <span class="n">get</span>
<span class="k">abstract</span> <span class="nc">Perimeter</span> <span class="p">:</span> <span class="kt">float</span>  <span class="k">with</span> <span class="n">get</span>
<span class="k">abstract</span> <span class="nc">Name</span> <span class="p">:</span> <span class="kt">string</span> <span class="k">with</span> <span class="n">get</span>
</code></pre></div></div>

<ul>
  <li>
<strong>obj</strong> is shortcut for <strong>System.Object</strong>
</li>
  <li>
<strong>do bindings</strong> perform actions when the object is constructed. do bindings are usually put after let bindings so that code in the do binding can execute with a fully initialized object.</li>
  <li>
<strong>unit</strong> is equivalent of void</li>
  <li>tabs are not allowed as they can indicate an unknown number of space characters and as spaces and indents matter</li>
  <li>
<strong>‘a</strong> means generic. By default a function <strong>f</strong> is infered as <strong>‘a -&gt; bool</strong> meaning it takes a general parameter and returns boolean</li>
  <li>Providing an incomplete list of functions result in a new function (currying)</li>
  <li>Getting values from tuples: <strong>fst</strong> gets the first value, <strong>snd</strong> gets the second value</li>
  <li>You can attach elements to a list by using the <strong>:: (cons)</strong> operator</li>
  <li>
<strong>@</strong> operator Concatenates two lists.</li>
  <li>Exceptions can be thrown using <strong>raise</strong> function. <strong>Reraise</strong> function rethrows an exception</li>
  <li>BigInt (C# and VB) don’t have support for arbitrarily long integers</li>
</ul>

<h2 id="resources">Resources</h2>
<ul>
  <li><a href="http://www.amazon.co.uk/Programming-F-3-0-Chris-Smith/dp/1449320295/" target="_blank" rel="noopener noreferrer">Book: Programming F# 3.0</a></li>
  <li><a href="http://www.pluralsight.com/courses/fsintro" target="_blank" rel="noopener noreferrer">Pluralsight course: Introduction to F#</a></li>
  <li><a href="https://msdn.microsoft.com/en-us/library/dd233220.aspx" target="_blank" rel="noopener noreferrer">MSDN Article: Casting and Conversions</a></li>
  <li><a href="https://msdn.microsoft.com/en-us/library/dd483471.aspx" target="_blank" rel="noopener noreferrer">MSDN Article: Abstract Classes</a></li>
  <li><a href="https://msdn.microsoft.com/en-us/library/dd483473.aspx" target="_blank" rel="noopener noreferrer">MSDN Article: do Bindings in Classes</a></li>
</ul>

		
		
	</div>


    </article>




    <article class="post" itemprop="blogPost" itemscope itemtype="http://schema.org/BlogPosting">
        
	<h1 class="title" itemprop="name"><a href="/archive/2015/01/24/adventures-in-fsharp-enums-and-constructors/" itemprop="url">Adventures in F# - Enums and constructors</a></h1>
	<div class="meta">
	<span class="date">




<time datetime="2015-01-24T18:30:00+00:00" itemprop="datePublished">January 24, 2015</time></span>
	<span class="categories"><!-- <span class="category-link"><a href="/category/dev">dev</a></span> -->

<!-- dev -->




    <a href="/category/dev">dev</a>
    
</span>
	<span class="tags">fsharp</span>
	
</div>
	<div class="entry-content" itemprop="articleBody">
		<p>Going over the F# Pluralsight course I learned a few more things and thought I should use them to improve my world-famous Rock-Paper-Too-Long-To-Type game.</p>

<h3 id="new-tidbits-and-improvements-in-the-game">New tidbits and improvements in the game</h3>
<ul>
  <li>
    <p><em>new</em> keyword is only required when the type implements IDisposable. So no need to use them on my RPSLS object. It works exactly the same.</p>
  </li>
  <li>
    <p>default constructor can be defined such as</p>
  </li>
</ul>

<div class="language-fsharp highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">new</span><span class="bp">()</span> <span class="p">=</span> <span class="nc">Car</span><span class="p">(</span><span class="s2">"red"</span><span class="p">,</span> <span class="mi">3</span><span class="p">)</span>
</code></pre></div></div>

<ul>
  <li>
    <p>You can access the constructor parameters anywhere in the object so there is no need to assign it to another value.</p>
  </li>
  <li>
    <p>Assigning values to enum values makes it compatible with other.NET languages. When I assigned values to moves an interesting thing happened. I stated getting this error: <em>Enumerations cannot have members</em> So you can overload operators in a discriminated union in F# and you can use it in F# only  but if you want your type be compatible with other CLR languages than you can only use it as a regular enum.</p>
  </li>
</ul>

<p>After I assigned the values my Move discriminated union became:</p>

<div class="language-fsharp highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">type</span> <span class="nc">Move</span> <span class="p">=</span> 
    <span class="p">|</span> <span class="nc">Rock</span> <span class="p">=</span> <span class="mi">0</span>
    <span class="p">|</span> <span class="nc">Spock</span> <span class="p">=</span> <span class="mi">1</span>
    <span class="p">|</span> <span class="nc">Paper</span> <span class="p">=</span> <span class="mi">2</span>
    <span class="p">|</span> <span class="nc">Lizard</span> <span class="p">=</span> <span class="mi">3</span>
    <span class="p">|</span> <span class="nc">Scissors</span> <span class="p">=</span> <span class="mi">4</span>
</code></pre></div></div>

<p>So no more overloaded minus operator which significantly reduced the lines of code in the type. After Googling a bit I found out that generally the above values are assigned to moves the winner is determined by extracting computer number from the player number and applying modulo operator. For example: When player plays rock (0) and computer plays paper (2)</p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>difference = player - computer = 0 - 2 = -2
result = -2 % 5 = 3 --&gt; Python returns 3 after this operation

if result &lt; 3 then player wins
if result &gt;= 3 then computer wins 
</code></pre></div></div>

<p>Apparently in F#, -2 % 5 = -2! So I had to add 5 before applying modulo operator:</p>

<div class="language-fsharp highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">let</span> <span class="n">diff</span> <span class="p">=</span> <span class="o">((</span><span class="kt">int</span><span class="o">)(</span><span class="n">this</span><span class="p">.</span><span class="nn">PlayerMoves</span><span class="p">.</span><span class="nc">Item</span><span class="p">(</span><span class="n">i</span><span class="p">)</span> <span class="p">-</span> <span class="nn">ComputerMoves</span><span class="p">.</span><span class="nc">Item</span><span class="p">(</span><span class="n">i</span><span class="o">))</span> <span class="o">+</span> <span class="mi">5</span><span class="p">)</span> <span class="o">%</span> <span class="mi">5</span>
</code></pre></div></div>

<h3 id="conclusion">Conclusion</h3>
<p>I’m still working with the PluralSight course. In the next post I’ll examine type casting, abstract types and do bindings etc</p>

<h2 id="resources">Resources</h2>
<ul>
  <li><a href="http://codepad.org/8NtmZw2w" target="_blank" rel="noopener noreferrer">Python implementation of RPSLS game</a></li>
  <li><a href="http://www.pluralsight.com/courses/fsintro" target="_blank" rel="noopener noreferrer">Pluralsight course: Introduction to F#</a></li>
</ul>


		
		
	</div>


    </article>




    <article class="post" itemprop="blogPost" itemscope itemtype="http://schema.org/BlogPosting">
        
	<h1 class="title" itemprop="name"><a href="/archive/2015/01/21/adventures-in-fsharp-interfaces-exception-handling-and-unit-testing/" itemprop="url">Adventures in F# - Interfaces, Exception Handling and Unit Testing</a></h1>
	<div class="meta">
	<span class="date">




<time datetime="2015-01-21T22:00:00+00:00" itemprop="datePublished">January 21, 2015</time></span>
	<span class="categories"><!-- <span class="category-link"><a href="/category/dev">dev</a></span> -->

<!-- dev -->




    <a href="/category/dev">dev</a>
    
</span>
	<span class="tags">fsharp</span>
	
</div>
	<div class="entry-content" itemprop="articleBody">
		<p>When I first came up with a complete program <a href="https://volkanpaksoy.com/archive/2015/01/13/adventures-in-fsharp-rock-paper-scissors-lizard-spock/">here</a> I was extremely happy. Functional programming feels like insurmountable (less so now but still) and building a fully functional program in F# felt great. Unfortunately, the moment has passed very quickly! Now it’s time to revisit and improve the Rock-Paper-Scissors-Lizard-Spock game. My main goal now is add</p>

<ul>
  <li>Convert the game into a class</li>
  <li>Add exception handling to handle invalid user input</li>
  <li>Add unit tests</li>
</ul>

<h3 id="whats-needed">What’s needed</h3>
<p>So first I had to investigate a few concepts to accomplish these goals. <a href="http://www.pluralsight.com/courses/fsintro" target="_blank" rel="noopener noreferrer">PluralSight course on F#</a> was a very helpful resource.</p>

<p>First version was not testable because it generated random moves inside the game and there was no way of anticipating the outcome. So I needed to harness some constructor Dependency Injection like this.</p>

<div class="language-fsharp highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">type</span> <span class="nc">RPSLS</span><span class="p">(</span><span class="n">userInput</span><span class="p">:</span> <span class="kt">string</span><span class="p">,</span> <span class="n">moveGenerator</span><span class="p">:</span> <span class="nc">IMoveGenerator</span><span class="p">)</span> <span class="p">=</span> 
    <span class="k">let</span> <span class="k">mutable</span> <span class="n">playerScore</span> <span class="p">=</span> <span class="mi">0</span>
    <span class="k">let</span> <span class="k">mutable</span> <span class="n">computerScore</span> <span class="p">=</span> <span class="mi">0</span>
    <span class="k">let</span> <span class="n">moveGen</span> <span class="p">=</span> <span class="n">moveGenerator</span>
</code></pre></div></div>

<p>When the game is run from the console application the RPSLS object is created with a random move generator as usual so the gameplay has not been affected. But now the tests can build the object with a FakeMoveGenerator that implements the same IMoveGenerator interface.</p>

<p>So the actual move generator the game uses becomes a separate object like this:</p>

<div class="language-fsharp highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">type</span> <span class="nc">RandomMoveGenerator</span><span class="bp">()</span> <span class="p">=</span> 
    <span class="k">member</span> <span class="n">this</span><span class="p">.</span><span class="nc">GenerateMove</span><span class="p">(</span><span class="n">n</span><span class="p">)</span> <span class="p">=</span> <span class="p">(</span><span class="n">this</span> <span class="p">:&gt;</span> <span class="nc">IMoveGenerator</span><span class="o">).</span><span class="nc">GenerateMove</span><span class="p">(</span><span class="n">n</span><span class="p">)</span>
    <span class="k">interface</span> <span class="nc">IMoveGenerator</span> <span class="k">with</span>
        <span class="k">member</span> <span class="n">this</span><span class="p">.</span><span class="nc">GenerateMove</span><span class="p">(</span><span class="n">n</span><span class="p">)</span> <span class="p">=</span> 
            <span class="k">let</span> <span class="n">rnd</span> <span class="p">=</span> <span class="nn">System</span><span class="p">.</span><span class="nc">Random</span><span class="bp">()</span>
            <span class="k">let</span> <span class="n">output</span> <span class="p">=</span> <span class="p">[</span> <span class="k">for</span> <span class="n">i</span> <span class="k">in</span> <span class="mi">1</span> <span class="p">..</span> <span class="n">n</span> <span class="p">-&gt;</span> 
                <span class="k">let</span> <span class="n">index</span> <span class="p">=</span> <span class="n">rnd</span><span class="p">.</span><span class="nc">Next</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">5</span><span class="p">)</span>
                <span class="k">match</span> <span class="n">index</span> <span class="k">with</span>
                <span class="p">|</span> <span class="mi">0</span> <span class="p">-&gt;</span> <span class="nn">Move</span><span class="p">.</span><span class="nc">Rock</span>
                <span class="p">|</span> <span class="mi">1</span> <span class="p">-&gt;</span> <span class="nn">Move</span><span class="p">.</span><span class="nc">Paper</span>
                <span class="p">|</span> <span class="mi">2</span> <span class="p">-&gt;</span> <span class="nn">Move</span><span class="p">.</span><span class="nc">Scissors</span>
                <span class="p">|</span> <span class="mi">3</span> <span class="p">-&gt;</span> <span class="nn">Move</span><span class="p">.</span><span class="nc">Lizard</span>
                <span class="p">|</span> <span class="mi">4</span> <span class="p">-&gt;</span> <span class="nn">Move</span><span class="p">.</span><span class="nc">Spock</span>
                <span class="p">|</span> <span class="p">_</span> <span class="p">-&gt;</span> <span class="n">failwith</span> <span class="s2">"Unexpected move"</span>
            <span class="p">]</span>
            <span class="n">output</span>
</code></pre></div></div>

<p>and the one tests use is like this:</p>

<div class="language-fsharp highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">type</span> <span class="nc">FakeMoveGenerator</span><span class="p">(</span><span class="n">moves</span> <span class="p">:</span> <span class="nc">List</span><span class="p">&lt;</span><span class="nc">Move</span><span class="o">&gt;)</span> <span class="p">=</span> 
    <span class="k">let</span> <span class="k">mutable</span> <span class="n">moveList</span> <span class="p">=</span> <span class="n">moves</span>
    
    <span class="k">member</span> <span class="n">this</span><span class="p">.</span><span class="nc">MoveList</span> 
        <span class="k">with</span> <span class="n">get</span> <span class="bp">()</span> <span class="p">=</span> <span class="n">moveList</span>
        <span class="k">and</span> <span class="n">set</span> <span class="p">(</span><span class="n">value</span><span class="p">)</span> <span class="p">=</span> <span class="p">(</span><span class="n">moveList</span> <span class="p">&lt;-</span> <span class="n">value</span><span class="p">)</span>

    <span class="k">member</span> <span class="n">this</span><span class="p">.</span><span class="nc">GenerateMove</span><span class="p">(</span><span class="n">n</span><span class="p">)</span> <span class="p">=</span> <span class="p">(</span><span class="n">this</span> <span class="p">:&gt;</span> <span class="nc">IMoveGenerator</span><span class="o">).</span><span class="nc">GenerateMove</span><span class="p">(</span><span class="n">n</span><span class="p">)</span>
    
    <span class="k">interface</span> <span class="nc">IMoveGenerator</span> <span class="k">with</span>
        <span class="k">member</span> <span class="n">this</span><span class="p">.</span><span class="nc">GenerateMove</span><span class="p">(</span><span class="n">n</span><span class="p">)</span> <span class="p">=</span> 
            <span class="k">let</span> <span class="n">output</span> <span class="p">=</span> <span class="p">[</span> <span class="k">for</span> <span class="n">i</span> <span class="k">in</span> <span class="mi">1</span> <span class="p">..</span> <span class="n">n</span> <span class="p">-&gt;</span> 
                <span class="n">moveList</span><span class="p">.</span><span class="nc">Item</span><span class="p">(</span><span class="n">i</span><span class="p">-</span><span class="mi">1</span><span class="p">)</span>
            <span class="p">]</span>
            <span class="n">output</span>
</code></pre></div></div>

<p>And they both implement the same interface IMoveGenerator:</p>

<div class="language-fsharp highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">type</span> <span class="nc">IMoveGenerator</span> <span class="p">=</span>
    <span class="k">abstract</span> <span class="k">member</span> <span class="nc">GenerateMove</span> <span class="p">:</span> <span class="kt">int</span> <span class="p">-&gt;</span>  <span class="nc">List</span><span class="p">&lt;</span><span class="nc">Move</span><span class="p">&gt;</span>
</code></pre></div></div>

<p>Another benefit of this is the game can be improved easily with advanced move generators. For example a move generator can be implemented to generate specific move sequences. There is an advanced strategy guide <a href="http://www.worldrps.com/advanced.html" target="_blank" rel="noopener noreferrer">here</a> which is an interesting read.</p>

<h3 id="installing-xunit-and-xunit-runner">Installing xUnit and xUnit Runner</h3>
<p>Installing xUnit is pretty straightforward. Just use NuGet and add the package. For runner, apparently there was VS etension that needed to be installed separately but it’s no longer the case. Check out <a href="http://xunit.github.io/docs/running-tests-in-vs.html" target="_blank" rel="noopener noreferrer">this guide</a> to find out how to install xUnit test runner. It makes</p>

<h3 id="testing">Testing</h3>
<p>I added a library to project for my tests, added xUnit and xUnit runner from NuGet I was ready to go.</p>

<p>So by decorating the test methoids with [<fact>] attributes I was able to run my tests to my predictable version of the game:</fact></p>

<div class="language-fsharp highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="p">[&lt;</span><span class="nc">Fact</span><span class="p">&gt;]</span>
<span class="k">let</span> <span class="nc">Game_Ends_With_Correct_Output_3_Moves_0_to_1</span><span class="bp">()</span> <span class="p">=</span>
    <span class="k">let</span> <span class="n">fakeGen</span> <span class="p">=</span> <span class="k">new</span> <span class="nc">FakeMoveGenerator</span><span class="o">([</span><span class="nn">Move</span><span class="p">.</span><span class="nc">Rock</span><span class="p">;</span> <span class="nn">Move</span><span class="p">.</span><span class="nc">Rock</span><span class="p">;</span> <span class="nn">Move</span><span class="p">.</span><span class="nc">Paper</span><span class="o">])</span>
    <span class="k">let</span> <span class="n">newGame</span> <span class="p">=</span> <span class="k">new</span> <span class="nc">RPSLS</span><span class="p">(</span><span class="s2">"r r r"</span><span class="p">,</span> <span class="n">fakeGen</span><span class="p">)</span>
    <span class="n">newGame</span><span class="p">.</span><span class="nc">RunGame</span><span class="bp">()</span>
    <span class="nn">Assert</span><span class="p">.</span><span class="nc">Equal</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="n">newGame</span><span class="p">.</span><span class="nc">PlayerScore</span><span class="p">)</span>
    <span class="nn">Assert</span><span class="p">.</span><span class="nc">Equal</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="n">newGame</span><span class="p">.</span><span class="nc">ComputerScore</span><span class="p">)</span>
</code></pre></div></div>

<h3 id="exception-handling">Exception Handling</h3>
<p>As the game is created with the user input I wanted it to check the user input before it ran the game and throw an exception if the input was erroneous. Throwing an exception is carried out with <em>failwith</em> keyword. That’s straightforward. Handling it on the other hand came with a little surprise:</p>

<p>There is a try…with block which is corresponds to standard try…catch. And there is a try…finally block but they is no try…catch…finally block so they had to be used separately:</p>

<div class="language-fsharp highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="p">[&lt;</span><span class="nc">EntryPoint</span><span class="p">&gt;]</span>
<span class="k">let</span> <span class="n">main</span> <span class="n">argv</span> <span class="p">=</span> 

    <span class="k">try</span>
        <span class="k">try</span>
            <span class="k">let</span> <span class="n">userInput</span> <span class="p">=</span> <span class="nn">Console</span><span class="p">.</span><span class="nc">ReadLine</span><span class="bp">()</span>
            <span class="k">let</span> <span class="n">newGame</span> <span class="p">=</span> <span class="k">new</span> <span class="nc">RPSLS</span><span class="p">(</span><span class="n">userInput</span><span class="p">,</span> <span class="k">new</span> <span class="nc">RandomMoveGenerator</span><span class="bp">()</span><span class="p">)</span>
            <span class="n">newGame</span><span class="p">.</span><span class="nc">RunGame</span><span class="bp">()</span>
        <span class="k">with</span>
            <span class="p">_</span> <span class="p">-&gt;</span> <span class="n">printfn</span> <span class="s2">"An error occured"</span>
    <span class="k">finally</span>
        <span class="n">printfn</span> <span class="s2">"Press any key to quit"</span>
        <span class="nn">Console</span><span class="p">.</span><span class="nc">ReadKey</span><span class="bp">()</span>

    <span class="mi">0</span>
</code></pre></div></div>

<p>In order to accomplish what I set out for I had to use two nested try blocks. Can’t say it looks great but until I get more accustomed with it I’ll just go along with quirks. At the moment it’s entirely possible that there’s a better alternative so I hope that’s the case here. Either way, it does the job after all.</p>

<h3 id="conclusion">Conclusion</h3>
<p>Final version is on GitHub. I might set sail to other seas and start new small projects before I revisit this one.</p>

<h2 id="resources">Resources</h2>
<ul>
  <li><a href="http://www.pluralsight.com/courses/fsintro" target="_blank" rel="noopener noreferrer">PluralSight Course: Introduction to F#</a></li>
  <li><a href="http://msdn.microsoft.com/en-us/library/dd233223.aspx" target="_blank" rel="noopener noreferrer">MSDN Article: Exception Handling</a></li>
  <li><a href="http://xunit.github.io/docs/running-tests-in-vs.html" target="_blank" rel="noopener noreferrer">Installing test runner on Visual Studio</a></li>
  <li><a href="https://github.com/volkanpaksoy/rock-paper-scissors-lizard-spock" target="_blank" rel="noopener noreferrer">Source Code</a></li>
</ul>

		
		
	</div>


    </article>


</div>
<nav id="pagenavi">
    
        <a href="/page/29" class="prev">Prev</a>
    
    
        <a href="/page/31" class="next">Next</a>
    
    <div class="center"><a href="/archive">Blog Archives</a></div>
</nav>
</div>
			</div>
			<footer id="footer" class="inner"><p>
  Copyright © 2021 - Volkan Paksoy Blog content licensed under the Creative Commons <a href="http://creativecommons.org/licenses/by/2.5/" target="_blank" rel="noopener noreferrer">CC BY 2.5</a> | Site design based on the <a href="https://github.com/shashankmehta/greyshade" target="_blank" rel="noopener noreferrer">Greyshade theme</a> under the <a href="http://sm.mit-license.org/" target="_blank" rel="noopener noreferrer">MIT license</a>
</p>
</footer>
		</div>
	</div>
</body>
</html>
