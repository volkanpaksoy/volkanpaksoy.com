<!DOCTYPE HTML>

<html>

<head>
	<meta charset="utf-8">
	<title>Playground for the mind</title>
	<meta name="author" content="Volkan Paksoy">

	
	<meta name="description" content="
		
	">
	

	<!-- http://t.co/dKP3o1e -->
	<meta name="HandheldFriendly" content="True">
	<meta name="MobileOptimized" content="320">
	<meta name="viewport" content="width=device-width, initial-scale=1">

	<link href="https://feeds.feedburner.com/PlaygroundForTheMind" rel="alternate" title="Playground for the mind" type="application/atom+xml">
	
	<link rel="canonical" href="https://volkanpaksoy.com/page/2/">
	<!--[if lt IE 9]><script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script><![endif]-->
	<!--Fonts from Google"s Web font directory at http://google.com/webfonts -->
	<link href='https://fonts.googleapis.com/css?family=Open+Sans:300,400,400italic,600,700,800' rel='stylesheet' type='text/css'>
	<link href="/favicon.png" rel="shortcut icon">
	<link href="/css/screen.css" media="screen, projection" rel="stylesheet" type="text/css">
	<link rel="stylesheet" href="/css/code.css" type="text/css">
	<script src="//ajax.googleapis.com/ajax/libs/jquery/1.7.2/jquery.min.js"></script>
	<script src="/js/slash.js" async></script>
	<script src="/js/GithubRepoWidget.min.js" async></script>

  	
	<script type="text/javascript">
		var _gaq = _gaq || [];
		_gaq.push(['_setAccount', 'UA-35583486-1']);
		_gaq.push(['_trackPageview']);

		(function() {
			var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
			ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
			var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
		})();
	</script>


</head>


<body>
	<div class="container">
		<div class="left-col">
			<div class="intrude-less">
				<header id="header" class="inner"><div class="profilepic">
	
	<a href="/">
		<img src="https://s.gravatar.com/avatar/760bf518408c38ebb0f0e5adb8089e30?s=80?s=160" alt="Profile Picture" style="width: 160px;">
	</a>	
	
</div>
<hgroup>
  <h1 class="site-title" style="font-size: 2.4em;">
		<a style="color: rgba(255, 165, 0, 0.8);" href="/">Playground for the mind</a>
	</h1>
  
    <h2>It's all about the journey, not the destination</h2>
  
</hgroup>

<nav id="sub-nav">
	<div class="social">
		
			<a class="rss" href="https://feeds.feedburner.com/PlaygroundForTheMind" title="RSS" target="_blank" rel="noopener noreferrer">RSS</a>
		
		
			<a class="github" href="https://github.com/volkanpaksoy" title="GitHub" target="_blank" rel="noopener noreferrer">GitHub</a>
		
		
			<a class="stackoverflow" href="https://stackoverflow.com/users/3093396/volkan-paksoy" title="StackOverflow" target="_blank" rel="noopener noreferrer">StackOverflow</a>
		
	</div>
</nav>

<nav id="main-nav">
<ul class="main-navigation">
  <li><a href="/archive">posts</a></li>
  <li><a href="/category">categories</a></li>
</ul>
</nav></header>				
			</div>
		</div>
		<div class="mid-col">
			<div class="mid-col-container">
				<div id="content" class="inner">
<div itemscope itemtype="http://schema.org/Blog">



    <article class="post" itemprop="blogPost" itemscope itemtype="http://schema.org/BlogPosting">
        
	<h1 class="title" itemprop="name"><a href="/archive/2019/10/26/Infrastructure-as-Code-with-AWS-CloudFormation-and-Cloud-Development-Kit/" itemprop="url">Infrastructure as Code with AWS CloudFormation and Cloud Development Kit (CDK)</a></h1>
	<div class="meta">
	<span class="date">




<time datetime="2019-10-26T13:00:00+01:00" itemprop="datePublished">October 26, 2019</time></span>
	<span class="categories"><!-- <span class="category-link"><a href="/category/devopsaws">devops</a></span> -->

<!-- devops, aws -->




    <a href="/category/devops">devops</a>
    , 

    <a href="/category/aws">aws</a>
    
</span>
	<span class="tags">cloudformation, cdk</span>
	
</div>
	<div class="entry-content" itemprop="articleBody">
		<h2 id="introduction">Introduction</h2>
<p>Using AWS is great as it simplifies and improves infrastructure provisioning and maintenance quite a lot. As you depend more and more on AWS you quickly realize that managing everything through AWS Management Console is not an ideal way.</p>

<p>Earlier this year, I published this <a href="https://volkanpaksoy.com/archive/2019/01/15/Infrastructure-as-code-with-AWS-CloudFormation/">post</a> about AWS CloudFormation. This post will also discuss using CloudFormation but by taking it a higher level by using AWS Cloud Development Kit (CDK).</p>

<h2 id="levels-of-infrastructure">Levels of infrastructure</h2>
<p>I liked the way the several approaches of infrastructure management is illustrated as levels here: <a href="https://www.youtube.com/watch?v=184S7ki6fJA" target="_blank" rel="noopener noreferrer">Develop a Web App Using Amazon ECS and AWS Cloud Development Kit (CDK) - AWS Online Tech Talks (YouTube Video)</a></p>

<p>In a nutshell, those levels are:</p>

<h3 id="level-0-by-hand">Level 0: By hand</h3>
<p>This approach is simply using AWS Management Console user interface to manage the infrastructure.</p>

<p><strong>Pros:</strong></p>

<ul>
  <li>Simple and easy</li>
  <li>Helps to get results faster for exploratory projects</li>
</ul>

<p><strong>Cons:</strong></p>

<ul>
  <li>Hard to reproduce</li>
  <li>Possible inconsistencies based on people’s preferences</li>
  <li>Error-prone</li>
  <li>Slow for complex systems</li>
</ul>

<h3 id="level-1-imperative-infrastructure-as-code">Level 1: Imperative Infrastructure as Code</h3>
<p>In this approach you write your own scripts using AWS SDK and manage the resources programmatically.</p>

<p><strong>Pros:</strong></p>

<ul>
  <li>Repeatable and reusable</li>
  <li>Can be source-controlled</li>
</ul>

<p><strong>Cons:</strong></p>

<ul>
  <li>Lots of boilerplate code</li>
  <li>It needs to address all edge cases</li>
</ul>

<h3 id="level-2-declarative-infrastructure-as-code">Level 2: Declarative Infrastructure as Code</h3>
<p>Describe the infrastructure as a script (in JSON or YAML) and use an resource provisioning engine such as AWS CloudFormation or HashiCorp Terraform which in turn use AWS SDK to manage the infrastructure.</p>

<p><strong>Pros:</strong></p>

<ul>
  <li>No boilerplate</li>
  <li>Creating and updating resources is handled automatically</li>
</ul>

<p><strong>Cons:</strong></p>

<ul>
  <li>Templates can become verbose</li>
  <li>Implementing logic is limited to some built-in helper functions</li>
</ul>

<h3 id="level-3-aws-cloud-development-kit">Level 3: AWS Cloud Development Kit</h3>
<p>In this approach software is developed using AWS CDK which generates the input for AWS CloudFormation.</p>

<p><img src="/images/vpblogimg/2019/10/aws_cdk/aws-cdk-overview.jpg" alt=""></p>

<p>The application can be developed in a number of languages. At the time of this writing the following languages are supported: TypeScript, JavaScript, Python, Java, C#.</p>

<p><strong>Pros:</strong></p>

<ul>
  <li>Handles creation of underlying resources. For example, when creating a VPC it also automatically generates YAML for all other networking resources (routing tables, NAT gateways etc) that are required by VPC.</li>
  <li>Helps with local workflow</li>
  <li>CDK constructs are reusable. Can be developed by AWS or third parties and can be installed separately.</li>
  <li>Ability to use familiar programming languages</li>
</ul>

<p><strong>Cons:</strong></p>

<ul>
  <li>Extra installation</li>
</ul>

<h2 id="basic-concepts">Basic Concepts</h2>
<ul>
  <li>
<strong>Construct:</strong> Basic building block for an AWS CDK app. Represents a “cloud component” and encapsulates everything AWS CloudFormation needs to create the component. They can be developed or downloaded from <a href="https://docs.aws.amazon.com/cdk/api/latest/docs/aws-construct-library.html" target="_blank" rel="noopener noreferrer">AWS Construct Library</a>
</li>
  <li>
<strong>Stack:</strong> Constructs need to be created within the scope of a Stack. This corresponds to a CloudFormation template.</li>
  <li>
<strong>App:</strong> Stacks are created in the scope of an App. An App can contain multiple stacks.</li>
</ul>

<h2 id="cdk-basics">CDK Basics</h2>
<ul>
  <li>In order to create an application that uses CDK we need to install the CDK</li>
  <li>The application can have one of the 3 supported templates:
    <ul>
      <li>app: General purpose application. This is the default template</li>
      <li>lib: Used to develop a CDK construct</li>
      <li>sample-app: Creates an application already populated with a sample CDK application.</li>
    </ul>
  </li>
  <li>The following diagram illustrates the app lifecycle:</li>
</ul>

<p><img src="/images/vpblogimg/2019/10/aws_cdk/aws-cdk-app-lifecycle.png" alt=""></p>

<h2 id="installing-cdk">Installing CDK</h2>
<p>AWS CDK is developed using TypeScript. It’s available via npm:</p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>npm install -g aws-cdk
</code></pre></div></div>

<h2 id="using-cdk">Using CDK</h2>
<p>In my example, I will use C#. A new project can be created by using <strong>cdk init</strong> command:</p>

<p><img src="/images/vpblogimg/2019/10/aws_cdk/aws-cdk-init.png" alt=""></p>

<p>It expects 2 parameters: Language (Can be one of these: csharp, fsharp, java, javascript, python or typescript).</p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>cdk init app --language csharp
</code></pre></div></div>

<p>To test my first app, I followed the sample app provided and added an S3 construct to my code:</p>

<div class="language-csharp highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">public</span> <span class="k">class</span> <span class="nc">CdkWorkoutStack</span> <span class="p">:</span> <span class="n">Stack</span>
<span class="p">{</span>
    <span class="k">public</span> <span class="nf">CdkWorkoutStack</span><span class="p">(</span><span class="n">Construct</span> <span class="n">parent</span><span class="p">,</span> <span class="kt">string</span> <span class="n">id</span><span class="p">,</span> <span class="n">IStackProps</span> <span class="n">props</span><span class="p">)</span> <span class="p">:</span> <span class="k">base</span><span class="p">(</span><span class="n">parent</span><span class="p">,</span> <span class="n">id</span><span class="p">,</span> <span class="n">props</span><span class="p">)</span>
    <span class="p">{</span>
        <span class="n">_</span> <span class="p">=</span> <span class="k">new</span> <span class="nf">Bucket</span><span class="p">(</span><span class="k">this</span><span class="p">,</span> <span class="s">"CdkBucket"</span><span class="p">,</span> <span class="k">new</span> <span class="n">BucketProps</span>
        <span class="p">{</span>
            <span class="n">Versioned</span> <span class="p">=</span> <span class="k">true</span>
        <span class="p">});</span>
    <span class="p">}</span>
<span class="p">}</span>
</code></pre></div></div>
<p>Next step is to synnthesize a CloudFormation template by running</p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>cdk synth
</code></pre></div></div>

<p>This generates a folder called cdk.out which contains a file named CdkWorkoutStack.template.json and with the following contents:</p>

<div class="language-json highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="p">{</span><span class="w">
  </span><span class="s2">"Resources"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="s2">"CdkBucket2FB0D10E"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="s2">"Type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"AWS::S3::Bucket"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"Properties"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="s2">"VersioningConfiguration"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
          </span><span class="s2">"Status"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Enabled"</span><span class="w">
        </span><span class="p">}</span><span class="w">
      </span><span class="p">},</span><span class="w">
      </span><span class="s2">"UpdateReplacePolicy"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Retain"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"DeletionPolicy"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Retain"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"Metadata"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="s2">"aws:cdk:path"</span><span class="p">:</span><span class="w"> </span><span class="s2">"CdkWorkoutStack/CdkBucket/Resource"</span><span class="w">
      </span><span class="p">}</span><span class="w">
    </span><span class="p">}</span><span class="w">
  </span><span class="p">}</span><span class="w">
</span><span class="p">}</span><span class="w">  
</span></code></pre></div></div>

<p>Final step is to create the resources by running</p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>cdk deploy
</code></pre></div></div>

<p>This produces the following results:</p>

<p><img src="/images/vpblogimg/2019/10/aws_cdk/aws-cdk-deployment-results.png" alt=""></p>

<p>And not surprisingly a CloudFormation stack with the bucket is created in AWS.</p>

<p>In the next version I’m going to change some properties of the bucket such as:</p>

<div class="language-csharp highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">public</span> <span class="k">class</span> <span class="nc">CdkWorkoutStack</span> <span class="p">:</span> <span class="n">Stack</span>
<span class="p">{</span>
    <span class="k">public</span> <span class="nf">CdkWorkoutStack</span><span class="p">(</span><span class="n">Construct</span> <span class="n">parent</span><span class="p">,</span> <span class="kt">string</span> <span class="n">id</span><span class="p">,</span> <span class="n">IStackProps</span> <span class="n">props</span><span class="p">)</span> <span class="p">:</span> <span class="k">base</span><span class="p">(</span><span class="n">parent</span><span class="p">,</span> <span class="n">id</span><span class="p">,</span> <span class="n">props</span><span class="p">)</span>
    <span class="p">{</span>
        <span class="n">_</span> <span class="p">=</span> <span class="k">new</span> <span class="nf">Bucket</span><span class="p">(</span><span class="k">this</span><span class="p">,</span> <span class="s">"CdkBucket"</span><span class="p">,</span> <span class="k">new</span> <span class="n">BucketProps</span>
        <span class="p">{</span>
            <span class="n">Versioned</span> <span class="p">=</span> <span class="k">true</span><span class="p">,</span>
            <span class="n">BlockPublicAccess</span> <span class="p">=</span> <span class="k">new</span> <span class="nf">BlockPublicAccess</span><span class="p">(</span><span class="k">new</span> <span class="nf">BlockPublicAccessOptions</span><span class="p">()</span>
            <span class="p">{</span>
                <span class="n">BlockPublicAcls</span> <span class="p">=</span> <span class="k">true</span><span class="p">,</span>
                <span class="n">BlockPublicPolicy</span> <span class="p">=</span> <span class="k">true</span>
            <span class="p">})</span>
        <span class="p">});</span>
    <span class="p">}</span>
<span class="p">}</span>
</code></pre></div></div>

<p>After this change in the code we can review what’s going to be updated by running the following command:</p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>cdk diff
</code></pre></div></div>

<p>and it produces the following result outlining the changes between the current code and the deployed version:</p>

<p><img src="/images/vpblogimg/2019/10/aws_cdk/aws-cdk-diff-results.png" alt=""></p>

<p>And the stack can be deleted by running the following command:</p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>cdk destroy
</code></pre></div></div>

<p>In the CDK version I’m using the default deletion policy is to retain. That’s why when I deleted the stack via CDK it didn’t delete the bucket. In order to change that behaviour I had to change the value to delete as such:</p>

<div class="language-csharp highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">public</span> <span class="k">class</span> <span class="nc">CdkWorkoutStack</span> <span class="p">:</span> <span class="n">Stack</span>
<span class="p">{</span>
    <span class="k">public</span> <span class="nf">CdkWorkoutStack</span><span class="p">(</span><span class="n">Construct</span> <span class="n">parent</span><span class="p">,</span> <span class="kt">string</span> <span class="n">id</span><span class="p">,</span> <span class="n">IStackProps</span> <span class="n">props</span><span class="p">)</span> <span class="p">:</span> <span class="k">base</span><span class="p">(</span><span class="n">parent</span><span class="p">,</span> <span class="n">id</span><span class="p">,</span> <span class="n">props</span><span class="p">)</span>
    <span class="p">{</span>
        <span class="kt">var</span> <span class="n">bucket</span> <span class="p">=</span> <span class="k">new</span> <span class="nf">Bucket</span><span class="p">(</span><span class="k">this</span><span class="p">,</span> <span class="s">"CdkBucket"</span><span class="p">,</span> <span class="k">new</span> <span class="n">BucketProps</span>
        <span class="p">{</span>
            <span class="n">Versioned</span> <span class="p">=</span> <span class="k">true</span><span class="p">,</span>
            <span class="n">BlockPublicAccess</span> <span class="p">=</span> <span class="k">new</span> <span class="nf">BlockPublicAccess</span><span class="p">(</span><span class="k">new</span> <span class="nf">BlockPublicAccessOptions</span><span class="p">()</span>
            <span class="p">{</span>
                <span class="n">BlockPublicAcls</span> <span class="p">=</span> <span class="k">true</span><span class="p">,</span>
                <span class="n">BlockPublicPolicy</span> <span class="p">=</span> <span class="k">true</span>
            <span class="p">})</span>
        <span class="p">});</span>

        <span class="kt">var</span> <span class="n">resource</span> <span class="p">=</span> <span class="n">bucket</span><span class="p">.</span><span class="n">Node</span><span class="p">.</span><span class="nf">FindChild</span><span class="p">(</span><span class="s">"Resource"</span><span class="p">)</span> <span class="k">as</span> <span class="n">Amazon</span><span class="p">.</span><span class="n">CDK</span><span class="p">.</span><span class="n">CfnResource</span><span class="p">;</span>
        <span class="n">resource</span><span class="p">.</span><span class="nf">ApplyRemovalPolicy</span><span class="p">(</span><span class="n">RemovalPolicy</span><span class="p">.</span><span class="n">DESTROY</span><span class="p">);</span>
    <span class="p">}</span>
<span class="p">}</span>
</code></pre></div></div>

<p>This time it produces a CloudFormation template with a different policy:</p>

<div class="language-json highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="p">{</span><span class="w">
  </span><span class="s2">"Resources"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="s2">"CdkBucket2FB0D10E"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="s2">"Type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"AWS::S3::Bucket"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"Properties"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="s2">"PublicAccessBlockConfiguration"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
          </span><span class="s2">"BlockPublicAcls"</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="p">,</span><span class="w">
          </span><span class="s2">"BlockPublicPolicy"</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="w">
        </span><span class="p">},</span><span class="w">
        </span><span class="s2">"VersioningConfiguration"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
          </span><span class="s2">"Status"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Enabled"</span><span class="w">
        </span><span class="p">}</span><span class="w">
      </span><span class="p">},</span><span class="w">
      </span><span class="s2">"UpdateReplacePolicy"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Delete"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"DeletionPolicy"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Delete"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"Metadata"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="s2">"aws:cdk:path"</span><span class="p">:</span><span class="w"> </span><span class="s2">"CdkWorkoutStack/CdkBucket/Resource"</span><span class="w">
      </span><span class="p">}</span><span class="w">
    </span><span class="p">}</span><span class="w">
  </span><span class="p">}</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre></div></div>

<p>This time after destroy command it did delete the bucket as well.</p>

<h2 id="conclusion">Conclusion</h2>
<p>I think infrastructure as code is definitely the way to manage cloud resources and CDK provides a great way to simplify the process. It’s at early stages for the time being as the NuGet packages are in devpreview mode but it’s good enough to rely on and start developing with CDK.</p>

<h2 id="resources">Resources</h2>
<ul>
  <li><a href="https://www.youtube.com/watch?v=Lh-kVC2r2AU" target="_blank" rel="noopener noreferrer">AWS re:Invent 2018: Infrastructure Is Code with the AWS Cloud Development Kit (DEV372) (YouTube Video)</a></li>
  <li><a href="https://www.youtube.com/watch?v=184S7ki6fJA" target="_blank" rel="noopener noreferrer">Develop a Web App Using Amazon ECS and AWS Cloud Development Kit (CDK) - AWS Online Tech Talks (YouTube Video)</a></li>
  <li><a href="https://docs.aws.amazon.com/en_pv/cdk/latest/guide/getting_started.html" target="_blank" rel="noopener noreferrer">AWS Documentation: Getting Started With the AWS CDK</a></li>
  <li><a href="https://docs.aws.amazon.com/cdk/api/latest/docs/aws-construct-library.html" target="_blank" rel="noopener noreferrer">AWS CDK Construct Library</a></li>
</ul>

		
		
	</div>


    </article>




    <article class="post" itemprop="blogPost" itemscope itemtype="http://schema.org/BlogPosting">
        
	<h1 class="title" itemprop="name"><a href="/archive/2019/10/26/Building-Robots-with-Lego-Mindstorms-EV3/" itemprop="url">Building Robots with Lego Mindstorms EV3</a></h1>
	<div class="meta">
	<span class="date">




<time datetime="2019-10-26T05:00:00+01:00" itemprop="datePublished">October 26, 2019</time></span>
	<span class="categories"><!-- <span class="category-link"><a href="/category/hobby">hobby</a></span> -->

<!-- hobby -->




    <a href="/category/hobby">hobby</a>
    
</span>
	<span class="tags">lego, mindstorms, ev3</span>
	
</div>
	<div class="entry-content" itemprop="articleBody">
		<p>In <a href="https://volkanpaksoy.com/archive/2019/10/24/Playing-with-Lego-Mindstorms/">this</a> I made an introduction to building robots with Lego Mindstorms. In this post I will not develop my own robot but will build one of Lego’s creations: Track3r</p>

<p><img src="/images/vpblogimg/2019/10/lego-2/lego-track3r.jpg" alt="Lego Track3r"></p>

<h2 id="building">Building</h2>
<p><a href="https://github.com/volkanpaksoy/lego/blob/master/docs/Lego-Track3r-Instructions.pdf" target="_blank" rel="noopener noreferrer">Instructions</a> are quite simple and I was able to build in a few hours.</p>

<p><img src="/images/vpblogimg/2019/10/lego-2/lab-in-use.jpeg" alt="Lab in use"></p>

<h2 id="connecting">Connecting</h2>
<p>I tested it with IR remote control and it works but I think the easiest and best way to control the robot is the iOS app.</p>

<p>To control the robot via app, first you need to have Bluetooth enabled both on your phone and EV3 brick:</p>

<p><img src="/images/vpblogimg/2019/10/lego-2/turn-on-bluetooth-onev3.jpeg" alt=""></p>

<p>After you install the app, connect it to the brick:</p>

<p><img src="/images/vpblogimg/2019/10/lego-2/bluetooth-connection-instructions.jpg" alt=""></p>

<p>Once connected, selected the robot you want to control (Track3r in this case):</p>

<p><img src="/images/vpblogimg/2019/10/lego-2/app-control-panel.jpg" alt=""></p>

<p>and the rest is just taking it to a test drive:</p>

<p><img src="/images/vpblogimg/2019/10/lego-2/lego-track3r-complete.jpg" alt=""></p>

<h2 id="conclusion">Conclusion</h2>
<p>One problem I had was I ran out of batteries very quickly. EV3 brick take 6 AA batteries and I use rechargable batteries. After playing around with the robot for about half an hour I ran out of batteries. Unfortunately the design of the robot doesn’t take replacing batteries into account. It seems it would be a bit painful to remove the brick only to replace the batteries and put it back in. Well, there are other models I wanted to build anyway at least I have now more experience with building and controlling the pre-designed robots. I think the most fun is programming the brick so I will explore more of that in the future.</p>

<h2 id="resources">Resources</h2>
<ul>
  <li><a href="https://github.com/volkanpaksoy/lego/blob/master/docs/Lego-Track3r-Instructions.pdf" target="_blank" rel="noopener noreferrer">Lego Track3r Instructions</a></li>
  <li><a href="https://github.com/volkanpaksoy/lego/blob/master/docs/Lego-Mindstorms-EV3-User-Guide.pdf" target="_blank" rel="noopener noreferrer">EV3 User Guide</a></li>
</ul>

		
		
	</div>


    </article>




    <article class="post" itemprop="blogPost" itemscope itemtype="http://schema.org/BlogPosting">
        
	<h1 class="title" itemprop="name"><a href="/archive/2019/10/24/Playing-with-Lego-Mindstorms/" itemprop="url">Playing with Lego Mindstorms NXT and EV3</a></h1>
	<div class="meta">
	<span class="date">




<time datetime="2019-10-24T07:00:00+01:00" itemprop="datePublished">October 24, 2019</time></span>
	<span class="categories"><!-- <span class="category-link"><a href="/category/hobby">hobby</a></span> -->

<!-- hobby -->




    <a href="/category/hobby">hobby</a>
    
</span>
	<span class="tags">lego, mindstorms, ev3, nxt-g, nxt</span>
	
</div>
	<div class="entry-content" itemprop="articleBody">
		<p><img src="/images/vpblogimg/2019/10/lego-1/lego-mindstorms-ev3.jpg" alt="Lego Mindstorms EV3"></p>

<p>Whenever I see my Lego Mindstorms kit on the shelf gathering dust I sigh then I tell myself one day I’ll find enough time to build soemthing with it again. That day was last weekend! This post is a collection of notes that I started taking when I started playing.</p>

<h2 id="terminology">Terminology</h2>
<p>I have 2 older bricks and one of the newer ones. At first glance the naming was a bit confusing. So to clarify there are 3 versions of the brick out there as outlines <a href="http://robotsquare.com/2013/07/16/ev3-nxt-compatibility/" target="_blank" rel="noopener noreferrer">here</a>.</p>

<ul>
  <li>The programmable bricks are all called <strong>Lego Mindstorms</strong>
</li>
  <li>The names of the versions are:
    <ul>
      <li>1998: LEGO MINDSTORMS <strong>RCX</strong>
</li>
      <li>2006: LEGO MINDSTORMS <strong>NXT</strong>
</li>
      <li>2013: LEGO MINDSTORMS <strong>EV3</strong>
</li>
    </ul>
  </li>
  <li>Also NXT has several sets:
    <ul>
      <li>LEGO MINDSTORMS NXT (8527)</li>
      <li>LEGO MINDSTORMS NXT 2.0 (8547)</li>
      <li>LEGO MINDSTORMS NXT Education Base Set (9797)</li>
    </ul>
  </li>
</ul>

<p>I have one of the education sets and one regular so I was getting confused about identifying which one was which as all the contents are mixed up at this point. The good news is shown in the same <a href="http://robotsquare.com/2012/02/18/understanding-nxt-versions/" target="_blank" rel="noopener noreferrer">article</a> that lists NXT sets:</p>

<ul>
  <li>The NXT Intelligent Brick is the same in all versions of the Mindstorms NXT sets.</li>
  <li>The NXT motors are the same in all versions of the Mindstorms NXT sets. Each version has three of such motors</li>
</ul>

<p>Since the brick is the heart and soul of the whole thing, it’s much easier to say that I have 2 NXT and 1 EV3 bricks.</p>

<h2 id="programming-the-brick">Programming the brick</h2>
<p>First, I downloaded the software and installed it:</p>

<p><img src="/images/vpblogimg/2019/10/lego-1/lego-mindstorms-software-installation.png" alt=""></p>

<p>Then plugged in the EV3 brick via USB cable:</p>

<p><img src="/images/vpblogimg/2019/10/lego-1/lego-mindstorms-connect-brick.png" alt=""></p>

<p>Unfortunately, macoOS Catalina doesn’t seem to support programming yet. Even though it installs fine and sees the EV3 brick connected I couldn’t make it work. So I reverted to my Surface Pro 3 and tried Windows to do the job.</p>

<p>I guess this time it really worked as it asked me to upgrade firmware on the brick which I did.</p>

<p><img src="/images/vpblogimg/2019/10/lego-1/lego-mindstorms-firmware-update.png" alt=""></p>

<p>After that I was able to start using NXT-G to develop my first program: An infinite loop of 2 motors moving forward</p>

<p><img src="/images/vpblogimg/2019/10/lego-1/lego-mindstorms-first-program.png" alt=""></p>

<p>And the result is simple but good enough for the time being:</p>

<iframe width="560" height="315" src="https://www.youtube.com/embed/3RE---CIvbI" frameborder="0" allow="accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture" allowfullscreen=""></iframe>

<h2 id="resources">Resources</h2>
<ul>
  <li><a href="https://www.lego.com/en-gb/mindstorms/downloads/download-software" target="_blank" rel="noopener noreferrer">Lego Software Download</a></li>
  <li><a href="http://robotsquare.com/2013/07/16/ev3-nxt-compatibility/" target="_blank" rel="noopener noreferrer">EV3 and NXT: Difference and Compatibility</a></li>
  <li><a href="http://robotsquare.com/2012/02/18/understanding-nxt-versions/" target="_blank" rel="noopener noreferrer">Tutorial: Understanding the difference between NXT set versions</a></li>
  <li><a href="https://volkanpaksoy.com/archive/2014/05/24/programming-lego-mindstorms-ev3-net-api">Old blog post: Programming EV3 with .NET</a></li>
  <li><a href="https://www.ev3dev.org/" target="_blank" rel="noopener noreferrer">ev3dev</a></li>
</ul>

		
		
	</div>


    </article>


</div>
<nav id="pagenavi">
    
        <a href="/" class="prev">Prev</a>
    
    
        <a href="/page/3" class="next">Next</a>
    
    <div class="center"><a href="/archive">Blog Archives</a></div>
</nav>
</div>
			</div>
			<footer id="footer" class="inner"><p>
  Copyright © 2020 - Volkan Paksoy Blog content licensed under the Creative Commons <a href="http://creativecommons.org/licenses/by/2.5/" target="_blank" rel="noopener noreferrer">CC BY 2.5</a> | Site design based on the <a href="https://github.com/shashankmehta/greyshade" target="_blank" rel="noopener noreferrer">Greyshade theme</a> under the <a href="http://sm.mit-license.org/" target="_blank" rel="noopener noreferrer">MIT license</a>
</p>
</footer>
		</div>
	</div>
</body>
</html>
